ktor {
    development = true
    deployment {
        port = 8080
        port = ${?PORT}
    }
    application {
        modules = [ org.openmbee.mms5.auth.ApplicationKt.module ]
    }
}

jwt {
    domain = "https://jwt-provider-domain/"
    domain = ${?JWT_DOMAIN}
    audience = "jwt-audience"
    audience = ${?JWT_AUDIENCE}
    realm = "MMS5 Microservices"
    realm = ${?JWT_REALM}
    secret = "test1234"
    secret = ${?JWT_SECRET}
}

ldap {
    location = "ldap://ldap.openmbee.org:636"
    location = ${?LDAP_LOCATION}
    base = "dc=openmbee,dc=org"
    base = ${?LDAP_BASE}
    userPattern = "uid=%s,ou=users"
    userPattern = ${?LDAP_USER_PATTERN}
    groupSearchFilter = "(&(objectclass=group)(uniqueMember=%s)(|(%s)))"
    groupSearchFilter = ${?LDAP_GROUP_SEARCH_FILTER}
    groupAttribute = "cn"
    groupAttribute = ${?LDAP_GROUP_ATTRIBUTE}
    groupStore {
        uri = "http://localhost:8081/bigdata/namespace/kb/sparql"
        uri = ${?LDAP_GROUP_STORE_URI}
        context = "https://mms.openmbee.org/demo/"
        context = ${?LDAP_GROUP_STORE_CONTEXT}
    }
}

consul {
    enabled = false
    enabled = ${?CONSUL_ENABLED}
    service {
        url = "http://localhost:8500"
        url = ${?CONSUL_SERVICE_URL}
        token = ""
        token = ${?CONSUL_SERVICE_TOKEN}
        name = "auth-service"
        name = ${?CONSUL_SERVICE_NAME}
        port = 8080
        port = ${?CONSUL_SERVICE_PORT}
        tags = ["L0", "authentication"]
        tags = ${?CONSUL_SERVICE_TAGS}
    }
}
